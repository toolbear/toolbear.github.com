---
layout: post
title: Saving a reordered list
author: toolbear
date: 2005-04-16 20:56:12.000000000 -07:00
type: post
published: true
status: publish
categories:
- Entries
tags:
- CSS
- DHTML
meta:
  _edit_last: '762816'
  _oembed_9ffede3ae0fcd1f96c2548817f5c00cc: "{{unknown}}"
  _oembed_b54ec3e8242d90f7bcccc78e50d1c4bf: "{{unknown}}"
  _oembed_15593837bd3630e9ccf469120051d697: "{{unknown}}"
  _oembed_cb9e0980eaa90e4df1731e265d4c6493: "{{unknown}}"
  _oembed_5412acad2a45b79fdbfb5bab0c81f513: "{{unknown}}"
  _oembed_fb2d564f2a9abb1bbf2aa7aab98b4d5a: "{{unknown}}"
  _oembed_b50bb9b381b5b4f4fa1f52345c37f9c6: "{{unknown}}"
  _oembed_53d2256bf397a92198e5a1d4c4412172: "{{unknown}}"
  _oembed_36c9974ecacb167c721f15ec2c9de4ae: "{{unknown}}"
  _oembed_f627f5d27d8aea0e68a0af636185e461: "{{unknown}}"
  _oembed_543876d0607b3156ae8675cd7d7c3021: "{{unknown}}"
  _oembed_3002642c07faf9738369a6875b661a8f: "{{unknown}}"
  _oembed_d9a5ef057018e455f5983cb1c2c78dc7: "{{unknown}}"
  _oembed_812ce27b1118115417561f1bf65310b9: "{{unknown}}"
  _oembed_6ee60d11c35ff5f929a8a1c3a3d1973c: "{{unknown}}"
  _oembed_5552718fb616c39f90f2fe1b3405e93b: "{{unknown}}"
  _oembed_2d2f10d996b7611fb682fbec21e6b4c1: "{{unknown}}"
  _oembed_f6b332b613cb8d2e685bae5e65489889: "{{unknown}}"
  _oembed_9d73427b4804e82a3da6f01856b2319d: "{{unknown}}"
  _oembed_15b035e446ad606ecbb5eb08a7d491a1: "{{unknown}}"
  _oembed_b33a2c9da8bffde48f4f75af5686df05: "{{unknown}}"
  _oembed_edf1ea95d12221d24573b390e0a61c1d: "{{unknown}}"
  _oembed_261fd32cc28090f5c5d1de0ea3741edc: "{{unknown}}"
  _oembed_45b3b670c7be27d0a858c0e5c7ace656: "{{unknown}}"
  _oembed_d7512adc76ca70210434427b432e886f: "{{unknown}}"
  _oembed_1e83b9333a78b238791b620091860407: "{{unknown}}"
  _oembed_f6b3a5dc6f11229035f630d7ace51b2b: "{{unknown}}"
  _oembed_fb56a8c5e0c08ed5840798854637b151: "{{unknown}}"
  _oembed_13757ab61ea4ab2566719afbac485360: "{{unknown}}"
  _oembed_f44b5e2c8be273992c581370ccacf5b7: "{{unknown}}"
  _oembed_1628815f0bf1fbb3ab34bb3117f81f0a: "{{unknown}}"
  _oembed_f0c07224b4f4006cb9c0e1b0ce0e160e: "{{unknown}}"
  _oembed_652a1a635260f4e381b7053f1d11b6ae: "{{unknown}}"
  _oembed_9b2addb65d721af5259d8e165a1681a0: "{{unknown}}"
  _oembed_2119aeee45c3c0293203bdde33c17f19: "{{unknown}}"
  _oembed_4843ddf75c0633fce09574148197c9f6: "{{unknown}}"
  _oembed_6c23c3cdd54ed74e284ad3cff76ac86e: "{{unknown}}"
  _oembed_080887f0a63f8dbdb97dfb462055c5af: "{{unknown}}"
  _oembed_1eb3b9024a42e33fab7706b1be6432bf: "{{unknown}}"
  _oembed_81e97ce19f3850c4409613ac1b2e8654: "{{unknown}}"
  _oembed_dd20f3eeefa4fed78ea56f2ff9a52c97: "{{unknown}}"
  _oembed_3580012f23d964c4f47f16a6c0b95b29: "{{unknown}}"
  _oembed_67040c2bb8715c254816fcd6c6b2ab65: "{{unknown}}"
  _oembed_8a86cb1df9f7eb196c7144c49bfc557f: "{{unknown}}"
  _oembed_6c66aa9d67e2f3dc66a4a976ce548fce: "{{unknown}}"
  _oembed_c7f2b90e6db26013ac5c68fef1a43cf9: "{{unknown}}"
  _oembed_c47009fdfa714bc7faaf779c883d8345: "{{unknown}}"
  _oembed_8937b6bba57f124ddbeb7ccbbcee72ae: "{{unknown}}"
  _oembed_fe76f745a1271d1ea167bcb95b096ecd: "{{unknown}}"
  _oembed_20da8be215dac885b4f63da5c94ba2f8: "{{unknown}}"
  _oembed_19b40450faf0f0d1d72c43dded6cdc8f: "{{unknown}}"
  _oembed_eed64e68af79cb3fccf46f19d878848d: "{{unknown}}"
  _oembed_fb93c8a72cbd6316d320e7719f01ca38: "{{unknown}}"
  _oembed_4f86f5bd6731e3d637088868356314e4: "{{unknown}}"
  _oembed_d9870caaddc8725d453f16733cc2140c: "{{unknown}}"
  _oembed_881df37c615c30010e8e99dc54586e6b: "{{unknown}}"
  _oembed_ffa10b21a23d289fd858c44d49291fc7: "{{unknown}}"
  _oembed_ef77753d3a2995a696fd161d7dd58a8c: "{{unknown}}"
wpauthor:
  login: toolbear74
  email: tim@tool-man.org
  display_name: Tim Taylor
  first_name: ''
  last_name: ''
---
<p><strong>Update 05/11</strong>: version 0.2 of the <a href="http://tool-man.org/examples/">DHTML Library</a> has a helper function to "serialize" the order of a list:</p>
<pre><code>ToolMan.junkdrawer().serializeList(myList)
</code></pre>
<p>It returns a string representation of the list as described in the remainder of this post.</p>
<hr />
<p>Tim Erfle and several others have asked a question like the following:</p>
<blockquote>
<p>Is there anyway to report the order of the list after it has been sorted by the user? Its a super cool script, but it would be helpful if store the user modified order in the database.</p>
</blockquote>
<p>Because the sorting is done by rearranging elements in the DOM, all you have to do is iterate over the parent element's children to extract the new order. For example:</p>
<pre><code>function foo(listID) {
    var list = document.getElementById(listID);
    var items = list.getElementsByTagName("li");
    var itemsString = "";
    for (var i = 0; i &lt; items.length; i++) {
        if (itemsString.length &gt; 0) itemsString += ":";
        itemsString += items[i].innerHTML;
    }
    alert(itemsString);
}
</code></pre>
<p>To use this in a form submit replace <code>alert(itemsString)</code> with something like <code>myHiddenInput.value = itemsString</code>. Or you could stuff <code>itemsString</code> in a cookie or pass it back to the server with <a href="http://developer.apple.com/internet/webcontent/xmlhttpreq.html">XMLHttpRequest</a>. The above example uses <code>items[i].innerHTML</code> which works fine so long as your list items are plain text. A better approach is to give each LI element a unique identifier. You can use the ID attribute or -- if you're not concerned about valid XHTML -- invent a new attribute to use. A list would look something like this:</p>
<pre><code>&lt;ul&gt;
    &lt;li listID="325"&gt;&lt;a href="..."&gt;Copper&lt;/a&gt;&lt;/li&gt;
    &lt;li listID="27"&gt;&lt;a href="..."&gt;Gold&lt;/a&gt;&lt;/li&gt;
    &lt;li listID="131"&gt;&lt;a href="..."&gt;Gold&lt;/a&gt;&lt;/li&gt;
    ...
&lt;/ul&gt;
</code></pre>
<p>And use a script like this to extract the order:</p>
<pre><code>function foo(listID, formInput) {
    var list = document.getElementById(listID);
    var items = list.getElementsByTagName("li");
    var itemIDs = "";
    for (var i = 0; i &lt; items.length; i++) {
        if (itemIDs.length &gt; 0) itemIDs += ":";
        itemIDs += items[i].getAttribute("listID");
    }
    // do something with itemIDs
}
</code></pre>
